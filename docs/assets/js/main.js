"use strict";const arrowUpDesign=document.querySelector(".js-arrow-up-d"),arrowDownDesign=document.querySelector(".js-arrow-down-d"),arrowUpFill=document.querySelector(".js-arrow-up-f"),arrowDownFill=document.querySelector(".js-arrow-down-f"),arrowUpShare=document.querySelector(".js-arrow-up-s"),arrowDownShare=document.querySelector(".js-arrow-down-s"),infoPage=document.querySelector(".color-design"),fillPage=document.querySelector(".fill-container"),sharePage=document.querySelector(".share-container"),designTitle=document.querySelector(".js-design-title"),fillTitle=document.querySelector(".js-fill-title2"),shareTitle=document.querySelector(".js-share-title3"),finishedCard=document.querySelector(".card-done"),sharedContainer=document.querySelector(".sharebutton"),createCardBtn=document.querySelector(".js-create-card"),formInputList=document.querySelectorAll(".js-form"),previewNameElement=document.querySelector(".js-preview-name"),previewJobElement=document.querySelector(".js-preview-job"),previewMailElement=document.querySelector(".js-preview-mail"),previewPhoneElement=document.querySelector(".js-preview-phone"),previewLinkedinElement=document.querySelector(".js-preview-linkedin"),previewGithubElement=document.querySelector(".js-preview-github"),cardPreview=document.querySelector(".js-card_box"),paletteRadios=document.querySelectorAll(".js-palette"),fr=new FileReader,fileField=document.querySelector(".js__profile-upload-btn"),profileImage=document.querySelector(".js__profile-image"),profilePreview=document.querySelector(".js__profile-preview"),cards_button=document.querySelector(".reset-js"),inputsForm=document.querySelectorAll(".js-form"),responseElement=document.querySelector(".js-generate"),twitterBtn=document.querySelector(".twitter-share"),twitterCardLink=document.querySelector(".js-twitter-link");function hideShare(e){e&&e.preventDefault(),sharePage.classList.toggle("js-hidden"),arrowDownShare.classList.toggle("js-hidden"),arrowUpShare.classList.toggle("js-hidden")}function hideFill(e){e&&e.preventDefault(),fillPage.classList.toggle("js-hidden"),arrowDownFill.classList.toggle("js-hidden"),arrowUpFill.classList.toggle("js-hidden")}function hideSDesign(e){e.preventDefault(),infoPage.classList.toggle("js-hidden"),arrowUpDesign.classList.toggle("js-hidden"),arrowDownDesign.classList.toggle("js-hidden")}function showFinishedCard(){sharedContainer.classList.add("js-hidden"),finishedCard.classList.remove("js-hidden")}hideFill(),hideShare(),designTitle.addEventListener("click",hideSDesign),fillTitle.addEventListener("click",hideFill),shareTitle.addEventListener("click",hideShare),createCardBtn.addEventListener("click",showFinishedCard);let data={palette:"",name:"",job:"",email:"",phone:"",linkedin:"",github:"",photo:""};const placeholderData={name:"Nombre Apellido",job:"Front-end developer"};function handleChangeForm(e){const t=e.target.name,r=e.target.value;"name"===t?(data.name=r,previewNameElement.innerHTML=data.name||placeholderData.name):"job"===t?(data.job=r,previewJobElement.innerHTML=data.job||placeholderData.job):"mail"===t?(data.email=r,previewMailElement.href="mailto: maria_zubeldia@hotmail.com"):"phone"===t?(data.phone=r,previewPhoneElement.href="tel:"+data.phone):"linkedin"===t?(data.linkedin=r,previewLinkedinElement.href="https://linkedin.com/"+data.linkedin):"github"===t&&(data.github=r,previewGithubElement.href="https://github.com/"+data.github),saveInLocalStorage()}for(const e of formInputList)e.addEventListener("keyup",handleChangeForm);function handlerChangeColor(e){cardPreview.classList.remove("palette-1","palette-2","palette-3"),"blue"===e.target.value?(data.palette=1,cardPreview.classList.add("palette-1")):"red"===e.target.value?(data.palette=2,cardPreview.classList.add("palette-2")):"mixedcolor"===e.target.value&&(data.palette=3,cardPreview.classList.add("palette-3")),saveInLocalStorage()}for(const e of paletteRadios)e.addEventListener("click",handlerChangeColor);const createBtn=document.querySelector(".js-create-card");function updateValuesInputs(e){console.log("holi update values"),document.querySelector(".js-name").value=e.name,document.querySelector(".js-job").value=e.job,document.querySelector(".js-mail").value=e.email,document.querySelector(".js-phone").value=e.phone,document.querySelector(".js-linkedin").value=e.linkedin,document.querySelector(".js-github").value=e.github}function updatePallete(e){console.log("holi caracolis update palettes"),cardPreview.classList.remove("palette-1","palette-2","palette-3"),1===e.palette?(cardPreview.classList.add("palette-1"),document.querySelector(".js-color1").checked=!0,document.querySelector(".js-color2").checked=!1,document.querySelector(".js-color3").checked=!1):2===e.palette?(document.querySelector(".js-color1").checked=!1,document.querySelector(".js-color2").checked=!0,document.querySelector(".js-color3").checked=!1,cardPreview.classList.add("palette-2")):3===e.palette&&(document.querySelector(".js-color1").checked=!1,document.querySelector(".js-color2").checked=!1,document.querySelector(".js-color3").checked=!0,cardPreview.classList.add("palette-3"))}function updateCard(e){previewNameElement.innerHTML=e.name,previewJobElement.innerHTML=e.job}function getImage(e){const t=e.currentTarget.files[0];fr.addEventListener("load",writeImage),fr.readAsDataURL(t)}function writeImage(){profileImage.style.backgroundImage=`url(${fr.result})`,profilePreview.style.backgroundImage=`url(${fr.result})`,data.photo=fr.result,saveInLocalStorage()}function fakeFileClick(){fileField.click()}function updatePhoto(e){profileImage.style.backgroundImage=`url(${e.photo}})`,profilePreview.style.backgroundImage=`url(${e.photo})`}function resetForm(){console.log("limpiando"),document.getElementById("cleanForm").value="",""===resetForm&&(cardPreview.innerHTML="Nombre Completo",profileImage.style.backgroundImage='url("../images/uni.png");')}function resetAll(){inputsForm.forEach(e=>{e.value=""}),previewNameElement.innerHTML=placeholderData.name,previewJobElement.innerHTML=placeholderData.job,profilePreview.style.backgroundImage='url("../images/uni.png");'}function resetPalettes(){document.querySelector(".js-palette-color:checked").checked=!1;document.querySelector(".color1").checked=!0;const e=document.querySelector(".js-cardElement");e.classList.remove("opt1","opt2","opt3"),e.classList.add("opt1")}function saveInLocalStorage(){const e=JSON.stringify(data);localStorage.setItem("userData",e)}function getFromLocalStorage(){const e=localStorage.getItem("userData");if(null!==e){const t=JSON.parse(e);data=t,updateValuesInputs(t),updatePallete(t),updatePhoto(t),updateCard(t)}}function handlerCreateCard(e){e.preventDefault(),fetch("https://awesome-profile-cards.herokuapp.com/card",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(data)}).then(e=>e.json()).then(e=>{!1===e.success?(responseElement.innerHTML="Tienes que rellenar los datos",responseElement.classList.remove("hidden")):(responseElement.innerHTML=`<a href= "${e.cardURL}">${e.cardURL}</a>`,twitterBtn.innerHTML=`<a class="js-new-tw-link" href = "https://twitter.com/intent/tweet?text=${e.cardURL}"</a>`,twitterBtn.innerHTML+='<i class="fab fa-twitter list-icon2c"></i>\n        Compartir en twitter',responseElement.classList.remove("hidden"))})}fileField.addEventListener("change",getImage),cards_button.addEventListener("click",resetForm),getFromLocalStorage(),createBtn.addEventListener("click",handlerCreateCard);